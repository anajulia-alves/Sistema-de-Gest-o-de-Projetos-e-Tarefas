<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <title>Tarefas - Gestão de Projetos</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/style.css}">
  </head>
  <body>
    <div class="container py-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="page-title">Tarefas</h1>
        <div>
         <a class="btn btn-success me-2" th:href="@{/tarefas/criar(projetoId=${projeto.id})}">Criar tarefa</a>
          <a class="btn btn-outline-light" href="/projetos">Voltar aos projetos</a>
        </div>
      </div>

      <div class="table-responsive shadow-sm rounded">
        <table class="table table-dark table-hover align-middle mb-0">
          <thead class="table-header">
            <tr>
              <th>ID</th>
              <th>Título</th>
              <th>Descrição</th>
              <th>Status</th>
              <th>Projeto</th>
              <th>Ações</th>
            </tr>
          </thead>

          <tbody>
            <tr th:each="tarefa : ${tarefas}">
              <td th:text="${tarefa.id}"></td>
              <td th:text="${tarefa.titulo}"></td>
              <td th:text="${tarefa.descricao}"></td>
              <td>
                <span th:text="${tarefa.status}" 
                      th:classappend="${tarefa.status == 'Concluída' ? 'badge bg-success' :
                                      (tarefa.status == 'Em andamento' ? 'badge bg-warning text-dark' :
                                      'badge bg-secondary')}">
                </span>
              </td>
              <td th:text="${tarefa.projeto.nome}"></td>
              <td>
                <a class="btn btn-sm btn-primary" 
                   th:href="@{/tarefas/editar(id=${tarefa.id})}">Editar</a>
                <a class="btn btn-sm btn-danger" 
                   th:href="@{/tarefas/deletar(id=${tarefa.id})}" 
                   onclick="return confirm('Tem certeza que deseja deletar?')">
                  Deletar
                </a>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
